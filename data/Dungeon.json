{
	"Changes": [
	{
		"Action": "EditData",
		"Target": "spacechase0.SpaceCore/Dungeons",
		"Entries": {
			"{{ModId}}_DollHouse": {
				"Regions": {
					"Main": {
						"LevelRange": { "Begin": 1, "End": 3 },
						"MapPool": [
							{
								"Weight": 1.0,
								"Value": "Maps/{{ModId}}_DollHouseBlank"
							},
						],
						"TriggerActionsOnEntry": [
							"{{ModId}}_DollHouseSetPieces",
							"{{ModId}}_EquipCharlesTrinket",
							"{{ModId}}_DollHouseSpawnMonsters",
							//"{{ModId}}_DungeonSpawnTreasure",
							//"{{ModId}}_DungeonSpawnBreakables",
						],
						"LocationDataEntry": "{{ModId}}_DollHouse",
					}
				},
				"LadderExitLocation": "{{ModId}}_LostAndFound",
				"LadderExitTile": "6, 6",
				"ElevatorExitLocation": "{{ModId}}_LostAndFound",
				"ElevatorExitTile": "6, 6",
				"SpawnLadders": false,
				"SpawnMineshafts": false,
				"AdditionalTimeMilliseconds": 999999
			}
		}
	},
	
	// MMAP dungeon map overrides
	{
		"Action": "EditData",
		"Target": "mushymato.MMAP/QuestionDialogue",
		"Entries": {
			"{{ModId}}_DungeonDoors1": {
				"ResponseEntries": {
					"Doors1": {
						"TileActionStopAtFirstSuccess": false,
						"TileActions": [
							"mushymato.MMAP_UpdateMapOverride Here - {{ModId}}_Door1Override",
							"mushymato.MMAP_UpdateMapOverride Here + {{ModId}}_Door1Override",
							"playSound doorClose",
							"mushymato.MMAP_WrpHere 0 -3 0 false true",
							"IncrementStat {{ModId}}_DungeonDoors 1"
						],
						"Actions": [
							"Spiderbuttons.BETAS_ActionList \"spacechase0.SpaceCore_TriggerSpawnGroup {{ModId}}_SingleMiseryWraithSpawnGroup Here [Spiderbuttons.BETAS_NumberOffset <TILE_X> -1],[Spiderbuttons.BETAS_NumberOffset <TILE_X> -6],1,1\""
						]
					},
				}
			},
			"{{ModId}}_DungeonDoors2": {
				"ResponseEntries": {
					"Doors2": {
						"Condition": "!mushymato.MMAP_HAS_MAP_OVERRIDE Here {{ModId}}_Door2Override,!SYNCED_RANDOM tick {{ModId}}_DungeonDoors 0.4,SYNCED_RANDOM tick {{ModId}}_DungeonDoors 0.7",
						"TileActionStopAtFirstSuccess": false,
						"TileActions": [
							"mushymato.MMAP_UpdateMapOverride Here - {{ModId}}_Door2Override",
							"mushymato.MMAP_UpdateMapOverride Here + {{ModId}}_Door2Override",
							"playSound doorClose",
							"mushymato.MMAP_WrpHere 0 -3 0 false true",
						],
						"Actions": [
							//"Spiderbuttons.BETAS_TriggerAction {{ModId}}_DungeonDoorSpawnChance",
						]
					},
				}
			},
			"{{ModId}}_DungeonDoors3": {
				"ResponseEntries": {
					"Doors3": {
						"Condition": "!mushymato.MMAP_HAS_MAP_OVERRIDE Here {{ModId}}_Door3Override,!SYNCED_RANDOM tick {{ModId}}_DungeonDoors 0.7",
						"TileActionStopAtFirstSuccess": false,
						"TileActions": [
							"mushymato.MMAP_UpdateMapOverride Here - {{ModId}}_Door3Override",
							"mushymato.MMAP_UpdateMapOverride Here + {{ModId}}_Door3Override",
							"playSound doorClose",
							"mushymato.MMAP_WrpHere 0 -3 0 false true",
						],
						"Actions": [
							//"Spiderbuttons.BETAS_TriggerAction {{ModId}}_DungeonDoorSpawnChance",
						]
					},
				}
			},
			"{{ModId}}_DungeonDoorsReturn1": {
				"ResponseEntries": {
					"Doors1": {
						"TileActionStopAtFirstSuccess": false,
						"TileActions": [
							// "mushymato.MMAP_UpdateMapOverride Here - {{ModId}}_Door1Override",
							//"mushymato.MMAP_UpdateMapOverride Here + {{ModId}}_Door1Override",
							"playSound doorClose",
							"mushymato.MMAP_WrpHere 0 2 0 false true",
						],
						"Actions": [
							//"Spiderbuttons.BETAS_TriggerAction {{ModId}}_DungeonDoorSpawnChance",
						]
					},
				}
			},
			"{{ModId}}_DungeonDoorsReturn2": {
				"ResponseEntries": {
					"Doors2": {
						"TileActionStopAtFirstSuccess": false,
						"TileActions": [
							// "mushymato.MMAP_UpdateMapOverride Here - {{ModId}}_Door2Override",
							// "mushymato.MMAP_UpdateMapOverride Here + {{ModId}}_Door2Override",
							"playSound doorClose",
							"mushymato.MMAP_WrpHere 0 2 0 false true",
						],
						"Actions": [
							//"Spiderbuttons.BETAS_TriggerAction {{ModId}}_DungeonDoorSpawnChance",
						]
					},
				}
			},
			"{{ModId}}_DungeonDoorsReturn3": {
				"ResponseEntries": {
					"Doors3": {
						"TileActionStopAtFirstSuccess": false,
						"TileActions": [
							// "mushymato.MMAP_UpdateMapOverride Here - {{ModId}}_Door3Override",
							// "mushymato.MMAP_UpdateMapOverride Here + {{ModId}}_Door3Override",
							"playSound doorClose",
							"mushymato.MMAP_WrpHere 0 2 0 false true",
						],
						"Actions": [
							//"Spiderbuttons.BETAS_TriggerAction {{ModId}}_DungeonDoorSpawnChance",
						]
					},
				}
			},
			
		}
	},
	{
		"Action": "EditData",
		"Target": "mushymato.MMAP/MapOverrides",
		"Entries": {
			"{{ModId}}_Door1Override": {
				"Id": "{{ModId}}_Door1Override",
				"SourceMap": "Maps/{{ModId}}_DungeonDoorsOverride",
				"SourceRect": {
					"X": 1,
					"Y": 1,
					"Width": 5,
					"Height": 5
				},	
				"TargetRectIsRelative": true,
				"RemovedById": "{{ModId}}_Door1OverrideRemove",
				"TargetRect": {
					"X": -3,
					"Y": -7,
					"Width": 5,
					"Height": 5
				},
				"ClearTargetRectOnApply": false
			},
			"{{ModId}}_Door2Override": {
				"Id": "{{ModId}}_Door2Override",
				"SourceMap": "Maps/{{ModId}}_DungeonDoorsOverride",
				"SourceRect": {
					"X": 6,
					"Y": 1,
					"Width": 4,
					"Height": 5
				},
				"TargetRectIsRelative": true,
				"RemovedById": "{{ModId}}_Door2OverrideRemove",
				"TargetRect": {
					"X": -2,
					"Y": -7,
					"Width": 4,
					"Height": 5
				},
				"ClearTargetRectOnApply": false
			},
			"{{ModId}}_Door3Override": {
				"Id": "{{ModId}}_Door3Override",
				"SourceMap": "Maps/{{ModId}}_DungeonDoorsOverride",
				"SourceRect": {
					"X": 10,
					"Y": 1,
					"Width": 5,
					"Height": 5
				},
				"TargetRectIsRelative": true,
				"RemovedById": "{{ModId}}_Door3OverrideRemove",
				"TargetRect": {
					"X": -2,
					"Y": -7,
					"Width": 5,
					"Height": 5
				},
				"ClearTargetRectOnApply": false
			},
			
			// removals
			"{{ModId}}_Door1OverrideRemove": {
				"Id": "{{ModId}}_Door1OverrideRemove",
				"SourceMap": "Maps/{{ModId}}_MazeSetPieces",
				"SourceRect": {
					"X": 23,
					"Y": 25,
					"Width": 5,
					"Height": 5
				},	
				"TargetRectIsRelative": true,
				"RemovedById": "{{ModId}}_Door1Override",
				"TargetRect": {
					"X": -3,
					"Y": -7,
					"Width": 5,
					"Height": 5
				},
				"ClearTargetRectOnApply": false
			},
			"{{ModId}}_Door2OverrideRemove": {
				"Id": "{{ModId}}_Door2OverrideRemove",
				"SourceMap": "Maps/{{ModId}}_MazeSetPieces",
				"SourceRect": {
					"X": 28,
					"Y": 25,
					"Width": 4,
					"Height": 5
				},
				"TargetRectIsRelative": true,
				"RemovedById": "{{ModId}}_Door2Override",
				"TargetRect": {
					"X": -2,
					"Y": -7,
					"Width": 4,
					"Height": 5
				},
				"ClearTargetRectOnApply": false
			},
			"{{ModId}}_Door3OverrideRemove": {
				"Id": "{{ModId}}_Door3OverrideRemove",
				"SourceMap": "Maps/{{ModId}}_MazeSetPieces",
				"SourceRect": {
					"X": 32,
					"Y": 25,
					"Width": 5,
					"Height": 5
				},
				"TargetRectIsRelative": true,
				"RemovedById": "{{ModId}}_Door3Override",
				"TargetRect": {
					"X": -2,
					"Y": -7,
					"Width": 5,
					"Height": 5
				},
				"ClearTargetRectOnApply": false
			},
		}
	},
	
	// rename mummy to misery wraith when in dungeon
	{
		"Action": "EditData",
		"Target": "Data/Monsters",
		"Fields": {
			"Mummy":{
				"14": "{{i18n:Monsters.MiseryWraith.DisplayName}}",
			}
		},
		"When": { "LocationName": "{{ModId}}_DollHouse"}, // this may need to be spacecore dungeon prefixed
		"Update": "OnLocationChange"
	},
	{
		"Action": "Load",
		"Target": "Mods/Textures/{{ModId}}_MiseryWraith",
		"FromFile": "assets/characters/zzminorCharacters/Wraith.png"
	},
  ]
}