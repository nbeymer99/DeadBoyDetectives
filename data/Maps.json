{
    "Changes": [
		
		// LOAD TILESHEETS
		{
			"Action": "Load",
			"Target": "Maps/{{ModId}}_LNFTiles, Maps/spring_{{ModId}}_docksTiles, Maps/summer_{{ModId}}_docksTiles, Maps/fall_{{ModId}}_docksTiles, Maps/winter_{{ModId}}_docksTiles, Maps/spring_{{ModId}}_finchhouseTiles, Maps/summer_{{ModId}}_finchhouseTiles, Maps/fall_{{ModId}}_finchhouseTiles,  Maps/winter_{{ModId}}_finchhouseTiles, Maps/{{ModId}}_finchhouseinteriorTiles, Maps/{{ModId}}_FRL_Elevator, Maps/spring_{{ModId}}_tongueandtail, Maps/summer_{{ModId}}_tongueandtail, Maps/fall_{{ModId}}_tongueandtail, Maps/winter_{{ModId}}_tongueandtail, Maps/{{ModId}}_furniture, Maps/{{ModId}}_furniture_2, Maps/{{ModId}}_furniture_3, Maps/{{ModId}}_wizard_furniture, Maps/fall_{{ModId}}_Lighthouse, Maps/spring_{{ModId}}_Lighthouse, Maps/summer_{{ModId}}_Lighthouse, Maps/winter_{{ModId}}_Lighthouse, Maps/{{ModId}}_festival", // why load festival tilesheet?
			"FromFile": "assets/maps/tilesheets/{{TargetWithoutPath}}.png",
		},
		
		// LOAD MAPS
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_DeadBoyAgency",
            "FromFile": "assets/maps/DeadBoyAgency.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Lighthouse",
            "FromFile": "assets/maps/Lighthouse.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_LighthouseInt",
            "FromFile": "assets/maps/LighthouseInt.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_LighthouseScary",
            "FromFile": "assets/maps/LighthouseScary.tmx"
        },
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_DeadBoyAgencyCauldron",
            "FromFile": "assets/maps/DeadBoyAgencyCauldron.tmx"
        },
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_TragicMicks",
            "FromFile": "assets/maps/TragicMicks.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Backpack",
            "FromFile": "assets/maps/Backpack.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_TNTInterior",
            "FromFile": "assets/maps/TNTInterior.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_CrystalAndNiko",
            "FromFile": "assets/maps/CrystalAndNiko.tmx",
			"When": {
				"HasSeenEvent |contains={{ModId}}_Seance2": true,
			}
        },
		{
			"LogName": "NikoRoomRuins",
			"Action": "Load",
			"Target": "Maps/{{ModId}}_CrystalAndNiko",
			"FromFile": "assets/maps/CrystalAndNiko_Ruins.tmx",
			"When": {
				"HasSeenEvent |contains={{ModId}}_Seance2": false,
			}
		},
/* 		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_CrystalAndNiko_Ruins",
            "FromFile": "assets/maps/CrystalAndNiko_Ruins.tmx"
        }, */
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_SeanceMap",
            "FromFile": "assets/maps/Seance.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_CrystalVoid",
            "FromFile": "assets/maps/CrystalVoid.tmx"
        },	
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Docks",
            "FromFile": "assets/maps/Docks.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Cannery",
            "FromFile": "assets/maps/Cannery.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_FinchHouseInt",
            "FromFile": "assets/maps/FinchHouseInt.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_FinchAttic",
            "FromFile": "assets/maps/FinchAttic.tmx"
        },
		{
			"Action": "Load",
			"Target": "Maps/{{ModId}}_MountainPass",
			"FromFile": "assets/maps/Compat/MontyHouseExterior_Alternate.tmx",
		},
		{
			"Action": "Load",
			"Target": "Maps/{{ModId}}_Graveyard",
			"FromFile": "assets/maps/Graveyard.tmx",
		},
/* 		{
			"Action": "Load",
			"Target": "Maps/{{ModId}}_GraveyardFestival",
			"FromFile": "assets/maps/GraveyardFestival.tmx",
		}, */ // uncomment this out?
		
		// RECOLORS
		{
			// daisyniko
			"Action": "EditImage",
			"Target": "Maps/{{season}}_{{ModId}}_Lighthouse",
			"FromFile": "assets/maps/tilesheets/{{season}}_daisyniko.png",
			"PatchMode": "Overlay",
			"When": {
				"HasMod": "DaisyNiko.EarthyRecolour",
			},
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
			"ToArea": {
				"X": 160,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
		},
		{
			// vpr
			"Action": "EditImage",
			"Target": "Maps/{{season}}_{{ModId}}_Lighthouse",
			"FromFile": "assets/maps/tilesheets/{{season}}_vpr.png",
			"PatchMode": "Overlay",
			"When": {
				"HasMod": "grapeponta.VibrantPastoralRecolor",
			},
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
			"ToArea": {
				"X": 160,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
		},
		{
			// starblue 
			"Action": "EditImage",
			"Target": "Maps/{{season}}_{{ModId}}_Lighthouse",
			"FromFile": "assets/maps/tilesheets/{{season}}_starblue.png",
			"PatchMode": "Overlay",
			"When": {
				"HasMod": "Lita.StarblueValleyUnofficial",
			},
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
			"ToArea": {
				"X": 160,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
		},
			
		//  VANILLA MAP PATCHES
			// CC normal
		{
			"Action": "EditMap",
			"Target": "Maps/CommunityCenter_Ruins",
			"FromFile": "assets/maps/CommunityCenter_RuinsRedux.tmx",
			"FromArea": { "X": 0, "Y": 0, "Width": 7, "Height": 6 },
			"ToArea": { "X": 45, "Y": 14, "Width": 7, "Height": 6 }
		},
			// CC post-completion
		{
			"Action": "EditMap",
			"Target": "Maps/CommunityCenter_Refurbished",
			"FromFile": "assets/maps/CommunityCenter_RuinsRedux.tmx",
			"FromArea": { "X": 0, "Y": 0, "Width": 7, "Height": 6 },
			"ToArea": { "X": 45, "Y": 14, "Width": 7, "Height": 6 }
		},
			// CC joja route
		{
			"Action": "EditMap",
			"Target": "Maps/CommunityCenter_Joja",
			"FromFile": "assets/maps/CommunityCenter_RuinsRedux.tmx",
			"FromArea": { "X": 0, "Y": 0, "Width": 7, "Height": 6 },
			"ToArea": { "X": 45, "Y": 14, "Width": 7, "Height": 6 }
		},
			// entrance to lighthouse beach
		{
			"Action": "EditMap",
			"Target": "Maps/Beach",
			"FromFile": "assets/maps/Beach_DBDA.tmx",
			"FromArea": { "X": 0, "Y": 0, "Width": 10, "Height": 9 },
			"ToArea": { "X": 0, "Y": 3, "Width": 10, "Height": 9 }			
		},	
			// entrance to cemetery
		{
			"Action": "EditMap",
			"Target": "Maps/Railroad",
			"FromFile": "assets/maps/Railroad_CemeteryEntrance.tmx",
			"FromArea": { "X": 0, "Y": 0, "Width": 1, "Height": 7 },
			"ToArea": { "X": 69, "Y": 51, "Width": 1, "Height": 7 },
			"AddWarps": [ "70 56 {{ModId}}_Graveyard 0 8", "70 57 {{ModId}}_Graveyard 0 9" ]
		},
			// tf? town swing
		{ // consider CP patch instead
			"Action": "EditMap",
			"Target": "Maps/Town",
			"FromFile": "assets/maps/Town_Swing.tmx",
			"FromArea": { "X": 15, "Y": 12, "Width": 1, "Height": 1 },
			"ToArea": { "X": 15, "Y": 12, "Width": 1, "Height": 1 }
		},
			// make swing passable
		{
            "Action": "EditMap",
            "Target": "Maps/Town",
            "MapTiles": [
                {
                    "Position": { "X": 15, "Y": 12 },
                    "Layer": "Buildings",
                    "SetProperties": { "Passable": "T" }
                },
            ]
        },
		
		// CUSTOM MAP PATCHES
			//	 monty moves in with jenny
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_TNTInterior",
			"When": {
			   "HasFlag:hostPlayer": "{{ModId}}_MontyTNT",
			   "HasFlag:hostPlayer": "{{ModId}}_MontyTransformed"
			},
			"Update": "OnLocationChange",
			"FromFile": "assets/maps/TNTInterior_Monty.tmx",
			"FromArea": { "X": 0, "Y": 0, "Width": 9, "Height": 17 },
			"ToArea": { "X": 23, "Y": 4, "Width": 9, "Height": 17 },
			"MapProperties": {
				"Doors": "22 18 1 120 28 18 1 120",
				"DayTiles": "Buildings 17 8 225 Buildings 20 8 225 Buildings 17 9 257 Buildings 20 9 257 Front2 17 10 480 Buildings 27 5 225 Buildings 28 5 225 Buildings 27 6 257 Buildings 28 6 257 Buildings2 28 7 480 Front 30 15 1346",
				"NightTiles": "Buildings 17 8 1222 Buildings 20 8 1222 Buildings 17 9 1254 Buildings 20 9 1254 Front2 17 10 809 Buildings 27 5 1222 Buildings 28 5 1222 Buildings 27 6 1254 Buildings 28 6 1254 Buildings2 28 7 809 Front 30 15 1347"
			}
		},
			// cauldron smoke - make TAS
		{
			"Action": "EditData",
			"Target": "mushymato.MMAP/TAS",
			"Entries": {
				"{{ModId}}_CauldronSmoke": {
					"Id": "{{ModId}}_CauldronSmoke",
					"Texture": "LooseSprites/Cursors",
					"DrawAboveAlwaysFront": true,
					"SourceRect": {
						"X": 372,
						"Y": 1956,
						"Width": 10,
						"Height": 10
					},
					"Alpha": 0.75,
					"AlphaFade": 0.002,
					"Motion": "0,-0.5",
					"Acceleration": "-0.002,0",
					"Interval": 99999,
					"LayerDepth": 0.144,
					"SortOffset": 0,
					"Scale": 0.75,
					"ScaleChange": 0.01,
					"Color": "Lime",
					"SpawnInterval": 100,
					// "SpawnDelay": 1000,
					"RandMin": {
						"PositionOffset": "-8,0",
						"LayerDepth": 0,
						"RotationChange": -0.0613592315155
					},
					"RandMax": {
						"PositionOffset": "16,4",
						"LayerDepth": 0.01,
						"RotationChange": 0.0736310778185
					}
				}
			}
		},
			// cauldron smoke - add TAS to map
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_FinchAttic",
			"MapTiles": [
				{
					"Position": {
						"X": 9,
						"Y": 13,
					},
					"Layer": "Back",
					"SetProperties": {
						"mushymato.MMAP_TAS": "{{ModId}}_CauldronSmoke"
					}
				}
			]
		},	
			// conditional map edit - crow in cage @ finch house
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_FinchHouseInt",
			"When": {
				"HasFlag: hostPlayer|contains={{ModId}}_MontyTransformed": false,
				"Time": "{{Range: 1900, 2600}}"
			},
			"Update": "OnTimeChange",
			"MapTiles": [
			{
				"Position": { "X": 1, "Y": 24 },
				"Layer": "Buildings",
				"SetTilesheet": "finchhouseint",
				"SetIndex": 24,
			},
			{
				"Position": { "X": 2, "Y": 24 },
				"Layer": "Buildings",
				"SetTilesheet": "finchhouseint",
				"SetIndex": 25,
			},
			{
				"Position": { "X": 1, "Y": 25 },
				"Layer": "Buildings",
				"SetTilesheet": "finchhouseint",
				"SetIndex": 34,
			},
			{
				"Position": { "X": 2, "Y": 25 },
				"Layer": "Buildings",
				"SetTilesheet": "finchhouseint",
				"SetIndex": 35,
			},
			]
		},
			// tantrum hole - let them out of jail
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_TantrumHole",
			"AddNPCWarps": [
				"2 4 {{ModId}}_FinchHouseInt 4 25"
			],
		},
			// joja route movie theatre
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_CrystalAndNiko",
			"When": {
				"HasFlag": "ccMovieTheaterJoja",
			},
			"MapTiles": [
			{
				"Position": { "X": 40, "Y": 19 },
				"Layer": "Front",
				"SetTilesheet": "mapObjects",
				"SetIndex": 28,
			},
			{
				"Position": { "X": 40, "Y": 20 },
				"Layer": "Buildings",
				"SetTilesheet": "mapObjects",
				"SetIndex": 34,
				"SetProperties": {
					"Action": "Warp 6 18 {{ModId}}_DeadBoyAgency",
				},
			},
		  ]
		},
			// Elevator NPC warps
		{
			"Action":"EditMap",
			"Target":"Maps/CommunityCenter_Refurbished",
			"AddNPCWarps": [
				"50 18 {{ModId}}_DeadBoyAgency 6 18"
			],
		},
		{
			"Action":"EditMap",
			"Target":"Maps/CommunityCenter_Ruins",
			"AddNPCWarps": [
				"50 18 {{ModId}}_DeadBoyAgency 6 18"
			],
		},
		{
			"Action":"EditMap",
			"Target":"Maps/CommunityCenter_Joja",
			"AddNPCWarps": [
				"50 18 {{ModId}}_DeadBoyAgency 6 18"
			],
		},
			// edit Agency map - rune circle passable
		{
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_DeadBoyAgency",
            "MapTiles": [
                {
                    "Position": { "X": 3, "Y": 17 },
                    "Layer": "Buildings",
                    "SetProperties": { "Passable": "T" }
                },
            ]
        },
			// make throne passable
		{
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_Cannery",
            "MapTiles": [
                {
                    "Position": { "X": 12, "Y": 19 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
            ]
        },
			// add cactus to crystal's room
		{
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_CrystalAndNiko",
            "MapTiles": [
                {
                    "Position": { "X": 29, "Y": 12 },
                    "Layer": "Front2",
					"SetTilesheet": "1",
					"SetIndex": 434,
                },
            ],
			"When": {
				"HasFlag |contains={{ModId}}_CactusGottenFlag": true,
			}
        },
			// make tiles NPC passable at night market
		{
            "Action": "EditMap",
            "Target": "Maps/Beach-NightMarket",
            "MapTiles": [
				{
                    "Position": { "X": 39, "Y": 40 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
                {
                    "Position": { "X": 40, "Y": 40 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
				{
                    "Position": { "X": 41, "Y": 40 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
				{
                    "Position": { "X": 42, "Y": 40 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
            ]
        },
	]
}