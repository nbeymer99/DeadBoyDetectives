{
    "Changes": [
		
		// LOAD TILESHEETS
		{
			"Action": "Load",
			"Target": "Maps/{{ModId}}_LNFTiles, Maps/{{ModId}}_docksTiles, Maps/{{ModId}}_finchhouseTiles, Maps/{{ModId}}_finchhouseinteriorTiles, Maps/{{ModId}}_FRL_Elevator, Maps/{{ModId}}_tongueandtail, Maps/{{ModId}}_furniture, Maps/{{ModId}}_furniture_2, Maps/{{ModId}}_furniture_3, Maps/{{ModId}}_wizard_furniture, Maps/fall_{{ModId}}_Lighthouse, Maps/spring_{{ModId}}_Lighthouse, Maps/summer_{{ModId}}_Lighthouse, Maps/winter_{{ModId}}_Lighthouse",
			"FromFile": "assets/maps/tilesheets/{{TargetWithoutPath}}.png",
		},
		
		// LOAD TMX
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_DeadBoyAgency",
            "FromFile": "assets/maps/DeadBoyAgency.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Lighthouse",
            "FromFile": "assets/maps/Lighthouse.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_LighthouseInt",
            "FromFile": "assets/maps/LighthouseInt.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_LighthouseScary",
            "FromFile": "assets/maps/LighthouseScary.tmx"
        },
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_DeadBoyAgencyCauldron",
            "FromFile": "assets/maps/DeadBoyAgencyCauldron.tmx"
        },
        {
            "Action": "Load",
            "Target": "Maps/{{ModId}}_TragicMicks",
            "FromFile": "assets/maps/TragicMicks.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Backpack",
            "FromFile": "assets/maps/Backpack.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Roof",
            "FromFile": "assets/maps/Roof.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_TNTInterior",
            "FromFile": "assets/maps/TNTInterior.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_CrystalAndNiko",
            "FromFile": "assets/maps/CrystalAndNiko.tmx",
			"When": {
				"HasSeenEvent |contains={{ModId}}_Seance2": true,
			}
        },
		{
			"LogName": "NikoRoomRuins",
			"Action": "Load",
			"Target": "Maps/{{ModId}}_CrystalAndNiko",
			"FromFile": "assets/maps/CrystalAndNiko_Ruins.tmx",
			"When": {
				"HasSeenEvent |contains={{ModId}}_Seance2": false,
			}
		},
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_CrystalAndNiko_Ruins",
            "FromFile": "assets/maps/CrystalAndNiko_Ruins.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_SeanceMap",
            "FromFile": "assets/maps/Seance.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_CrystalVoid",
            "FromFile": "assets/maps/CrystalVoid.tmx"
        },	
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Docks",
            "FromFile": "assets/maps/Docks.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_Cannery",
            "FromFile": "assets/maps/Cannery.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_FinchHouseInt",
            "FromFile": "assets/maps/FinchHouseInt.tmx"
        },
		{
            "Action": "Load",
            "Target": "Maps/{{ModId}}_FinchAttic",
            "FromFile": "assets/maps/FinchAttic.tmx"
        },
		
		// RECOLORS
		{
			// daisyniko
			"Action": "EditImage",
			"Target": "Maps/{{ModId}}_{{season}}_Lighthouse",
			"FromFile": "assets/maps/tilesheets/{{season}}_daisyniko.png",
			"PatchMode": "Overlay",
			"When": {
				"HasMod": "DaisyNiko.EarthyRecolour",
			},
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
			"ToArea": {
				"X": 160,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
		},
		{
			// vpr
			"Action": "EditImage",
			"Target": "Maps/{{ModId}}_{{season}}_Lighthouse",
			"FromFile": "assets/maps/tilesheets/{{season}}_vpr.png",
			"PatchMode": "Overlay",
			"When": {
				"HasMod": "grapeponta.VibrantPastoralRecolor",
			},
			"FromArea": {
				"X": 0,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
			"ToArea": {
				"X": 160,
				"Y": 0,
				"Width": 96,
				"Height": 64,
			},
		},
			
		// MAP PATCHES
		{
			"Action": "EditMap",
			"Target": "Maps/CommunityCenter_Ruins",
			"FromFile": "assets/maps/CommunityCenter_RuinsRedux.tmx",
			"FromArea": { "X": 45, "Y": 14, "Width": 7, "Height": 6 },
			"ToArea": { "X": 45, "Y": 14, "Width": 7, "Height": 6 }
		},
		{
			"Action": "EditMap",
			"Target": "Maps/CommunityCenter_Refurbished",
			"FromFile": "assets/maps/CommunityCenter_RuinsRedux.tmx",
			"FromArea": { "X": 45, "Y": 14, "Width": 7, "Height": 6 },
			"ToArea": { "X": 45, "Y": 14, "Width": 7, "Height": 6 }
		},
		{
			"Action": "EditMap",
			"Target": "Maps/CommunityCenter_Joja",
			"FromFile": "assets/maps/CommunityCenter_RuinsRedux.tmx",
			"FromArea": { "X": 45, "Y": 14, "Width": 7, "Height": 6 },
			"ToArea": { "X": 45, "Y": 14, "Width": 7, "Height": 6 }
		},
		{
			"Action": "EditMap",
			"Target": "Maps/Beach",
			"FromFile": "assets/maps/Beach_DBDA.tmx",
			"FromArea": { "X": 0, "Y": 3, "Width": 10, "Height": 10 },
			"ToArea": { "X": 0, "Y": 3, "Width": 10, "Height": 10 }			
		},
		{
			"Action": "EditMap",
			"Target": "Maps/Beach",
			"FromFile": "assets/maps/Beach_Docks.tmx",
			"FromArea": { "X": 2, "Y": 0, "Width": 16, "Height": 11 },
			"ToArea": { "X": 88, "Y": 0, "Width": 16, "Height": 11 }			
		},
		{
			"Action": "EditMap",
			"Target": "Maps/Town",
			"FromFile": "assets/maps/TongueAndTail.tmx",
			"FromArea": { "X": 6, "Y": 62, "Width": 16, "Height": 15 },
			"ToArea": { "X": 6, "Y": 62, "Width": 16, "Height": 15 }
		},
		{
			"Action": "EditMap",
			"Target": "Maps/Town",
			"FromFile": "assets/maps/Town_Swing.tmx",
			"FromArea": { "X": 15, "Y": 12, "Width": 1, "Height": 1 },
			"ToArea": { "X": 15, "Y": 12, "Width": 1, "Height": 1 }
		},
		{
			"Action": "EditMap",
			"Target": "Maps/Mountain",
			"FromFile": "assets/maps/MontyHouseExterior.tmx",
			"FromArea": { "X": 74, "Y": 26, "Width": 22, "Height": 15 },
			"ToArea": { "X": 74, "Y": 26, "Width": 22, "Height": 15 }
		},
			// joja route movie theatre
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_CrystalAndNiko",
			"When": {
				"HasFlag": "ccMovieTheaterJoja",
			},
			"MapTiles": [
			{
				"Position": { "X": 40, "Y": 19 },
				"Layer": "Front",
				"SetTilesheet": "mapObjects",
				"SetIndex": 28,
			},
			{
				"Position": { "X": 40, "Y": 20 },
				"Layer": "Buildings",
				"SetTilesheet": "mapObjects",
				"SetIndex": 34,
				"SetProperties": {
					"Action": "Warp 6 18 {{ModId}}_DeadBoyAgency",
				},
			},
		  ]
		},
		
		// BETAS dependency
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_CrystalAndNiko",
			"MapTiles": [
				{
					"Position": {
						"X": 37,
						"Y": 10
					},
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "Warp 22 26 handwrittenhello.dbda_CrystalVoid"
					},
				},
			],
			"When": {
				"Hearts:CrystalPalace": "10, 11, 12, 13",
			}
		},
		
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_CrystalAndNiko",
			"MapTiles": [
				{
					"Position": {
						"X": 37,
						"Y": 10
					},
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "spacechase0.SpaceCore_TriggerAction {{ModId}}_TreeWarp"
					},
				},
			],
			"When": {
				"Hearts:CrystalPalace": "10, 11, 12, 13",
				"HasMod |contains=Spiderbuttons.BETAS": true,
			}
		},
		
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_CrystalVoid",
			"MapTiles": [
				{
					"Position": {
						"X": 22,
						"Y": 25
					},
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "spacechase0.SpaceCore_TriggerAction {{ModId}}_TreeWarp_Back"
					},
				},
			],
			"When": {
				"HasMod |contains=Spiderbuttons.BETAS": true,
			}
		},
		
		{
			"Action": "EditMap",
			"Target": "Maps/CommunityCenter_Ruins",
			"MapTiles": [
				{
					"Position": {
						"X": 49,
						"Y": 17
					},
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "spacechase0.SpaceCore_TriggerAction {{ModId}}_CCElevator"
					},
				},
				{
					"Position": {
						"X": 50,
						"Y": 17
					},
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "spacechase0.SpaceCore_TriggerAction {{ModId}}_CCElevator"
					},
				},
			],
			"When": {
				"HasMod |contains=Spiderbuttons.BETAS": true,
			}
		},
		
		{
			"Action": "EditMap",
			"Target": "Maps/CommunityCenter_Refurbished",
			"MapTiles": [
				{
					"Position": {
						"X": 49,
						"Y": 17
					},
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "spacechase0.SpaceCore_TriggerAction {{ModId}}_CCElevator"
					},
				},
				{
					"Position": {
						"X": 50,
						"Y": 17
					},
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "spacechase0.SpaceCore_TriggerAction {{ModId}}_CCElevator"
					},
				},
			],
			"When": {
				"HasMod |contains=Spiderbuttons.BETAS": true,
			}
		},
		
		{
			"Action": "EditMap",
			"Target": "Maps/CommunityCenter_Joja",
			"MapTiles": [
				{
					"Position": {
						"X": 49,
						"Y": 17
					},
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "spacechase0.SpaceCore_TriggerAction {{ModId}}_CCElevator"
					},
				},
				{
					"Position": {
						"X": 50,
						"Y": 17
					},
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "spacechase0.SpaceCore_TriggerAction {{ModId}}_CCElevator"
					},
				},
			],
			"When": {
				"HasMod |contains=Spiderbuttons.BETAS": true,
			}
		},
		
		// MAP EDITS
			// Elevator NPC warp
		{
			"Action":"EditMap",
			"Target":"Maps/CommunityCenter_Refurbished",
			"AddNPCWarps": [
				"50 18 {{ModId}}_DeadBoyAgency 6 18"
			],
		},
		{
			"Action":"EditMap",
			"Target":"Maps/CommunityCenter_Ruins",
			"AddNPCWarps": [
				"50 18 {{ModId}}_DeadBoyAgency 6 18"
			],
		},
		{
			"Action":"EditMap",
			"Target":"Maps/CommunityCenter_Joja",
			"AddNPCWarps": [
				"50 18 {{ModId}}_DeadBoyAgency 6 18"
			],
		},
			//beach NPC warps
		{
			"Action":"EditMap",
			"Target":"Maps/Beach",
			"AddNPCWarps": [ "0 6 {{ModId}}_Lighthouse 103 8", "103 6 {{ModId}}_Docks 0 7" ],
		},
			// beach warps
		{
			"Action": "EditMap",
			"Target": "Maps/Beach",
			"AddWarps": ["-1 4 {{ModId}}_Lighthouse 103 7", "-1 5 {{ModId}}_Lighthouse 103 8", "-1 6 {{ModId}}_Lighthouse 103 9", "-1 7 {{ModId}}_Lighthouse 103 10", "-1 8 {{ModId}}_Lighthouse 103 10", "104 5 {{ModId}}_Docks 0 7", "104 6 {{ModId}}_Docks 0 8", "104 7 {{ModId}}_Docks 0 9", "104 8 {{ModId}}_Docks 0 10" ],
		},
		
		// SVE compat
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_Lighthouse",
			"FromFile": "assets/maps/Lighthouse_SVE.tmx",
			"FromArea": { "X": 26, "Y": 0, "Width": 12, "Height": 5 },
			"ToArea": { "X": 26, "Y": 0, "Width": 12, "Height": 5 },
			"When": {
				"HasMod": "FlashShifter.StardewValleyExpandedCP",
			}
		},
		{
			"Action": "EditMap",
			"Target": "Maps/Custom_BlueMoonVineyard",
			"AddWarps": [
				"56 61 {{ModId}}_Lighthouse 32 1",
				"56 62 {{ModId}}_Lighthouse 32 1",
				"56 63 {{ModId}}_Lighthouse 32 1",
				"56 64 {{ModId}}_Lighthouse 32 1"
			],
			"When": {
				"HasMod": "FlashShifter.StardewValleyExpandedCP",
			}
		},
		{
			"Action": "EditMap",
			"Target": "Maps/{{ModId}}_Lighthouse",
			"AddWarps": [
				"32 0 Custom_BlueMoonVineyard 55 63"
			],
			"When": {
				"HasMod": "FlashShifter.StardewValleyExpandedCP",
			}
		},
 		{
			"Action": "EditMap",
			"Target": "Maps/Mountain",
			"When": {
				"HasMod": "FlashShifter.StardewValleyExpandedCP", 
			},
			"FromFile": "assets/maps/MontyHouseExterior_SVE.tmx",
			"FromArea": { "X": 74, "Y": 26, "Width": 22, "Height": 15 },
			"ToArea": { "X": 74, "Y": 26, "Width": 22, "Height": 15 }
		},
		
		// EDIT TOWN MAP
		//
			// day/night tiles and lighting
		{
            "Action": "EditMap",
            "Target": "Maps/Town",
			"TextOperations": [
			{
				"Operation": "Append",
				"Target": ["MapProperties", "NightTiles"],
				"Value": "AlwaysFront 18 70 11 AlwaysFront 19 70 12 AlwaysFront 18 71 24 AlwaysFront 19 71 25 AlwaysFront 18 72 37 AlwaysFront 19 72 38 AlwaysFront 20 64 139",
				"Delimiter": " "
			},
			
			{
				"Operation": "Append",
				"Target": ["MapProperties", "DayTiles"],
				"Value": "AlwaysFront 18 70 50 AlwaysFront 19 70 51 AlwaysFront 18 71 63 AlwaysFront 19 71 64 AlwaysFront 18 72 76 AlwaysFront 19 72 77",
				"Delimiter": " "
			},
			
			{
				"Operation": "Append",
				"Target": ["MapProperties", "spacechase0.SpaceCore_ColoredLights"],
				"Value": "18 70 4 1 50 255 255 19 70 4 1 50 255 255 18 71 4 1 50 255 255 19 71 4 1 50 255 255 19 72 4 1 50 255 255",
				"Delimiter": " "
			},
			]
		},
		
		{
            "Action": "EditMap",
            "Target": "Maps/Town-Halloween",
			"TextOperations": [
			{
				"Operation": "Append",
				"Target": ["MapProperties", "spacechase0.SpaceCore_ColoredLights"],
				"Value": "17 70 4 1 50 255 255 18 70 4 1 50 255 255 17 71 4 1 50 255 255 18 71 4 1 50 255 255 18 72 4 1 50 255 255",
				"Delimiter": " "
			},
			]
		},
		{
            "Action": "EditMap",
            "Target": "Maps/Town-Halloween2",
			"TextOperations": [
			{
				"Operation": "Append",
				"Target": ["MapProperties", "spacechase0.SpaceCore_ColoredLights"],
				"Value": "17 74 4 1 50 255 255 18 74 4 1 50 255 255 17 75 4 1 50 255 255 18 75 4 1 50 255 255 18 74 4 1 50 255 255",
				"Delimiter": " "
			},
			]
		},
		
		{
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_Roof",
			"TextOperations": [
			{
				"Operation": "Append",
				"Target": ["MapProperties", "NightTiles"],
				"Value": "AlwaysFront 18 70 11 AlwaysFront 19 70 12 AlwaysFront 18 71 24 AlwaysFront 19 71 25 AlwaysFront 18 72 37 AlwaysFront 19 72 38",
				"Delimiter": " "
			},
			
			{
				"Operation": "Append",
				"Target": ["MapProperties", "DayTiles"],
				"Value": "AlwaysFront 18 70 50 AlwaysFront 19 70 51 AlwaysFront 18 71 63 AlwaysFront 19 71 64 AlwaysFront 18 72 76 AlwaysFront 19 72 77",
				"Delimiter": " "
			},
			
			{
				"Operation": "Append",
				"Target": ["MapProperties", "Light"],
				"Value": "13 63 4",
				"Delimiter": " "
			},
			
			{
				"Operation": "Append",
				"Target": ["MapProperties", "spacechase0.SpaceCore_ColoredLights"],
				"Value": "18 70 4 1 50 255 255 19 70 4 1 50 255 255 18 71 4 1 50 255 255 19 71 4 1 50 255 255 19 72 4 1 50 255 255",
				"Delimiter": " "
			},
			]
		},
		
			// make swing passable
		{
            "Action": "EditMap",
            "Target": "Maps/Town",
            "MapTiles": [
                {
                    "Position": { "X": 15, "Y": 12 },
                    "Layer": "Buildings",
                    "SetProperties": { "Passable": "T" }
                },
            ]
        },
			// edit Agency map - rune circle passable
		{
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_DeadBoyAgency",
            "MapTiles": [
                {
                    "Position": { "X": 3, "Y": 17 },
                    "Layer": "Buildings",
                    "SetProperties": { "Passable": "T" }
                },
            ]
        },
			// make throne passable
		{
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_Cannery",
            "MapTiles": [
                {
                    "Position": { "X": 12, "Y": 19 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
            ]
        },
			// add cactus to crystal's room
		{
            "Action": "EditMap",
            "Target": "Maps/{{ModId}}_CrystalAndNiko",
            "MapTiles": [
                {
                    "Position": { "X": 29, "Y": 12 },
                    "Layer": "Front2",
					"SetTilesheet": "1",
					"SetIndex": 434,
                },
            ],
			"When": {
				"HasFlag |contains={{ModId}}_CactusGottenFlag": true,
			}
        },
			// make tiles NPC passable at night market
		{
            "Action": "EditMap",
            "Target": "Maps/Beach-NightMarket",
            "MapTiles": [
				{
                    "Position": { "X": 39, "Y": 40 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
                {
                    "Position": { "X": 40, "Y": 40 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
				{
                    "Position": { "X": 41, "Y": 40 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
				{
                    "Position": { "X": 42, "Y": 40 },
                    "Layer": "Buildings",
                    "SetProperties": { "NPCPassable": "T" }
                },
            ]
        },
	]
}